{% extends "main/base.html" %}
{% load static %}
{% load humanize %}

{% block head %}
    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="{% static 'main/js/custom_charts.js' %}"></script>
{% endblock head %}

{% block fullwidth %}
<div class="jumbotron jumbotron-fluid">
  <div class="container">
    <div class='thermoglobe-logo'>
        {% include 'main/components/thermoglobe_logo.html' with updated=False %}
    </div>
    <p class="lead d-none d-lg-block">Last updated {{recently_added.0.date_added|naturaltime}}</p>
    <hr class="my-4">
    <p class="card-text d-none d-lg-block">This revised version of the Global Heat Flow Database by Dr Derrick Hasterok and Sam Jennings contains {{ counts.heat_flow|intcomma }} individual heat flow estimates as well as {{ counts.conductivity|intcomma }} thermal conductivity, {{ counts.heat_generation|intcomma }} heat generation and {{ counts.temperature|intcomma }} temperature data. Data are compiled from {{ counts.reference|intcomma }} publications over {{ counts.years }} years of heat flow research as well as many more unpublished sources.</p>
  </div>
</div>
{% endblock fullwidth %}
{% block content %}
<div class='container d-flex flex-row flex-wrap justify-content-between'>
        {% include "main/components/figure.html" with figure=ContributionsPerYear fig_num=1 %}
        {% include "main/components/figure.html" with figure=HeatFlowHist fig_num=2 %}
        {% comment %} {% include "main/components/figure.html" with id="HeatFlowPie" %} {% endcomment %}
        {% comment %} {% include "main/components/figure.html" with id="GradientPie" %} {% endcomment %}
        {% comment %} {% include "main/components/figure.html" with id="HFSeaPie" %}  {% endcomment %}
</div>
{% endblock content %}


{% block scripts %}
    <script>
        historical_heat_flow(
            {{ContributionsPerYear.ID|safe}},
            {{ContributionsPerYear.data|safe}})

        heat_flow_hist(
            {{HeatFlowHist.ID|safe }},
            {{HeatFlowHist.data|safe }})
        {% comment %} entries_pie_chart({{heat_flow_pie|safe }},'HeatFlowPie') {% endcomment %}
        {% comment %} entries_pie_chart({{gradient_pie|safe }},'GradientPie') {% endcomment %}
        {% comment %} entries_pie_chart({{heat_flow_sea_pie|safe }},'HFSeaPie') {% endcomment %}



    </script>




{% comment %} <script src="{% static 'main/js/Chart.min.js' %}"></script> {% endcomment %}
{% comment %} <script src="https://unpkg.com/chartjs-plugin-colorschemes"></script> {% endcomment %}
{% comment %} <script src="{% static 'main/js/custom_charts.js' %}"></script> {% endcomment %}

{% comment %} <script>
    data_counts({{ data_counts|safe }},{{ data_labels|safe }})
    sites_by_country({{ country_data|safe }},{{ country_labels|safe }})
    publications_per_year({{ reference|safe }}.reverse())
</script> {% endcomment %}


{% endblock scripts %}
