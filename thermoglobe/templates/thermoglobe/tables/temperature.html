{% load static sekizai_tags geojson_tags %}

<div id="{{label|slugify}}-container" class='tab-pane fade'>
  <div class='table-responsive'>
    <table id="{{label|slugify}}-table" class="table table-hover w-100" >
      <thead>
        <tr>
          <th colspan='3' class='text-center border-0'></th>
        </tr>
        <tr>
          <th>Site</th>
          <th>Lat</th>
          <th class='border-right'>Lon</th>
          <th>Depth</th>
          <th>Method</th>
          <th>Temperature</th>
          <th>Uncertainty</th>
          <th>Correction</th>
        </tr>
      </thead>
    </table>
  </div>
</div>

{% addtoblock "css" %}<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.11.3/r-2.2.9/datatables.min.css"/>{% endaddtoblock %}
{% addtoblock "js" %}<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.11.3/r-2.2.9/datatables.min.js"></script>{% endaddtoblock %}
{% addtoblock "js" %}<script src="{% static 'thermoglobe/js/table.js' %}"></script>{% endaddtoblock %}

{% addtoblock "js" %}<script>
$('#{{label|slugify}}-table').create_table({
  url: '/api/temperature/?{{filter_by}}',
  fields: [{'data':'site.site_name','render': $.fn.dataTable.render.href('/sites/',"site.id")},'site.latitude','site.longitude','depth','method','temperature','uncertainty','correction']
  })
</script>
{% endaddtoblock %}