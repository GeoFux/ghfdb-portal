(function(){var e={3737:function(e,t,a){"use strict";var l=a(3862),o=a(3396),n=(a(7658),a(4870)),r=a(7139),i=a(4964),s=a(5626);const u={class:"cursor-coordinates"};var c={__name:"CursorCoordinates",props:{map:i.Map},setup(e){const t=e,a=(0,n.iH)(t.map),l=(0,n.iH)(),i=(0,n.iH)();return(0,o.YP)(t,(e=>{a.value=e.map,a.value.on("mousemove",(function(e){l.value=e.lngLat.wrap().lat.toFixed(5),i.value=e.lngLat.wrap().lng.toFixed(5)}))})),(e,t)=>((0,o.wg)(),(0,o.iD)("div",u,"Lat: "+(0,r.zw)(l.value)+", Lon: "+(0,r.zw)(i.value),1))}},p=a(89);const d=(0,p.Z)(c,[["__scopeId","data-v-51ba85a2"]]);var m=d,v=a(2578);const g=(0,v.Q_)("settings",(()=>{const e=(0,n.iH)(""),t=(0,n.iH)(4),a=(0,n.iH)("#41b6c4");return{activeBaseLayer:e,circleRadius:t,circleColor:a}})),f=(0,v.Q_)("baseMaps",(()=>{const e=(0,n.iH)([{id:"bm_osm",title:"OpenStreetMap",cardImage:"https://a.tile.openstreetmap.org/0/0/0.png",tiles:"https://a.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"&copy; OpenStreetMap Contributors"},{id:"bm_otm",title:"OpenTopoMap",cardImage:"https://a.tile.opentopomap.org/0/0/0.png",tiles:"https://a.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:"Kartendaten: <a href='https://openstreetmap.org/copyright'>© OpenStreetMap-Mitwirkende</a>, <a href='http://viewfinderpanoramas.org/'>SRTM</a> | Kartendarstellung: <a href='https://opentopomap.org/'>© OpenTopoMap</a> <a href='https://creativecommons.org/licenses/by-sa/3.0/'>CC-BY-SA</a>"},{id:"bm_world_bathymetry",title:"Some example for WMTS",cardImage:"https://services.ga.gov.au/gis/rest/services/World_Bathymetry_Base_Map/MapServer/WMTS/tile/1.0.0/World_Bathymetry_Base_Map/default/default028mm/0/0/0.png",tiles:"https://services.ga.gov.au/gis/rest/services/World_Bathymetry_Base_Map/MapServer/WMTS/tile/1.0.0/World_Bathymetry_Base_Map/default/default028mm/{z}/{y}/{x}.png",attribution:"Map tiles by <a href='https://ecat.ga.gov.au/geonetwork/srv/api/records/62030aca-329d-44b2-8b36-c74a5ac1f574'>World Bathymetry Base Map WMTS</a>, <a href='https://creativecommons.org/licenses/'>CC BY 4.0</a>"}]);return{baseMaps:e}})),h={class:"base-map-settings"},w=(0,o._)("p",{class:"d-grid gap-2"},[(0,o._)("button",{class:"btn btn-primary",type:"button","data-bs-toggle":"collapse","data-bs-target":"#baseMaps","aria-expanded":"false","aria-controls":"baseMaps"},[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrows-expand",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2M8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10"})]),(0,o.Uk)(" Base Maps ")])],-1),b={class:"collapse",id:"baseMaps"},y={class:"maps-content d-flex"},_=["onClick"],S=["src"],k={class:"text-center"};var U={__name:"BaseMapSettings",props:{map:i.Map},setup(e){const t=g(),a=f(),l=e;function i(e,a){a!=e&&(l.map.setLayoutProperty(e,"visibility","none"),l.map.setLayoutProperty(a,"visibility","visible"),t.activeBaseLayer=a)}return(e,l)=>((0,o.wg)(),(0,o.iD)("div",h,[w,(0,o._)("div",b,[(0,o._)("div",y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,n.SU)(a).baseMaps,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"card mx-1",style:{width:"9rem"},role:"button",key:e.id,onClick:a=>i((0,n.SU)(t).activeBaseLayer,e.id)},[(0,o._)("img",{class:"card-img-top",src:e.cardImage,alt:"Card image cap"},null,8,S),(0,o._)("p",k,(0,r.zw)(e.title),1)],8,_)))),128))])])]))}};const x=U;var M=x,V=(a(541),a(1832)),C=a(4161),F=a(6254),L=a(5941);const W=(0,v.Q_)("measurements",(()=>{const e=(0,n.iH)(null),t=(0,n.iH)(null),a=(0,n.iH)(null),l=(0,n.iH)(null),o=(0,n.iH)(null);async function r(e){o.value=!0,L.log("API Data Schema");try{let a=new V;await a.dereference(e).then((e=>{t.value=e.components.schemas.Measurement,L.log(t.value),v(),o.value=!1}))}catch(a){L.log("error in fetching data schema"+a)}}async function i(e,t){return t=t||[],await C.Z.get(e).then((e=>(e.data.results.forEach((e=>{t.push(e)})),null!=e.data.next?i(e.data.next,t):t))).catch((e=>{L.log("rejected",e)})),L.log("return data"),L.log(t),t}function s(e){const t=Object.keys(e);let a=null,l={};return t.forEach((t=>{"sample"==t?null!=e[t].location&&(a=e[t].location.point):l[t]=e[t]})),[a,l]}function u(e){const t={id:e[1].id,type:"Feature",geometry:e[0],properties:e[1]};if(F.isFeature(t,!0))return t;L.log(F.isFeature(t,!0))}function c(e){return i(e).then((e=>{L.log("measurments"),L.log(e);let t=[];e.forEach((e=>{const a=s(e);t.push(u(a))}));const a={type:"FeatureCollection",features:t};if(F.isFeatureCollection(a))return L.log("inside async func"),L.log(a),a;L.log(F.isFeatureCollection(a,!0))}))}async function p(t){l.value=!0,e.value=await c(t),l.value=!1}function d(e){let a=null;return("string"!=t.value.properties[e].type||t.value.properties[e].enum)&&("integer"!=t.value.properties[e].type||t.value.properties[e].minimum&&t.value.properties[e].maximum)?"object"==t.value.properties[e].type?(L.log(e+" is not suitable for data driven coloring"),a=!1):a=!0:(L.log(e+" is not suitable for data driven coloring"),a=!1),a}function m(e){const a=t.value.properties[e];let l={};return l["title"]=a.title,l["key"]=e,l}function v(){const e=Object.keys(t.value.properties);let l=[];e.forEach((e=>{d(e)&&l.push(m(e))})),a.value=l,L.log("check selectable properties"),L.log(a.value)}return{geojson:e,dataSchema:t,selectableProperties:a,isDataLoading:l,isSchemaLoading:o,fetchAPIData:p,fetchAPIDataSchema:r}})),H=(0,v.Q_)("legend",(()=>{const e=(0,n.iH)(null);function t(t,a){let l={};for(var o=0;o<a.length;o++)a.length==t.length?l[o]={id:o,text:t[o],colorHEX:a[o]}:a.length<t.length&&(l[o]={id:o,text:t[o].toFixed(2)+" - "+t[o+1].toFixed(2),colorHEX:a[o]});e.value=l}function a(){e.value&&(e.value=null)}return{legend:e,setLegendObject:t,setLegendToNull:a}}));var P=a(6368),D=a(6494),j=a.n(D),B=a(8003),A=a(9183),O=a(5941);const E=(0,o._)("p",{class:"mt-1 d-grid gap-2"},[(0,o._)("button",{class:"btn btn-primary",type:"button","data-bs-toggle":"collapse","data-bs-target":"#circleSize","aria-expanded":"false","aria-controls":"circleSize"},[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrows-expand",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2M8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10"})]),(0,o.Uk)(" Circle Size ")])],-1),T={class:"collapse",id:"circleSize"},z={class:"card card-body"},N={class:"text-muted text-center"},Z=(0,o._)("p",{class:"mt-1 d-grid gap-2"},[(0,o._)("button",{class:"btn btn-primary",type:"button","data-bs-toggle":"collapse","data-bs-target":"#circleFillColor","aria-expanded":"false","aria-controls":"circleFillColor"},[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrows-expand",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2M8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10"})]),(0,o.Uk)(" Fill color ")])],-1),q={class:"collapse",id:"circleFillColor"},I={class:"card card-body"},Y={class:"btn-group",role:"group","aria-label":"Color Selection"},R=["onClick"],K=(0,o._)("p",{class:"mt-1 d-grid gap-2"},[(0,o._)("button",{class:"btn btn-primary",type:"button","data-bs-toggle":"collapse","data-bs-target":"#dataDrivenColoring","aria-expanded":"false","aria-controls":"dataDrivenColoring"},[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrows-expand",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2M8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10"})]),(0,o.Uk)(" Data Driven Coloring ")])],-1),G={class:"collapse",id:"dataDrivenColoring"},Q={class:"card card-body"},X=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-info-circle"},[(0,o._)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),(0,o._)("path",{d:"m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"})],-1),J={class:"btn-group"},$={class:"btn-group"};var ee={__name:"CircleStylingSettings",props:{map:i.Map},setup(e){const t=e,a=W(),i=H(),u=g(),c=(0,n.iH)(null),p=(0,n.iH)(),d=(0,n.iH)([3,4,5,6,7,8,9,10,11]),m=(0,n.iH)(4),v=(0,n.iH)(null);_(m.value);const f=(0,n.iH)(v.value[0]),h=(0,n.iH)([{name:"quantil",title:"Quantil",desc:"Each class contains an equal number of features",src:"https://pro.arcgis.com/en/pro-app/latest/help/mapping/layer-properties/data-classification-methods.htm#ESRI_SECTION1_1BDD383C17164B948BF546CEADDA70E9"},{name:"jenks",title:"Jenks",desc:"Class breaks are created in a way that best groups similar values together and maximizes the differences between classes",src:"https://pro.arcgis.com/en/pro-app/latest/help/mapping/layer-properties/data-classification-methods.htm#ESRI_SECTION1_B47C458CFF6A4EEC933A8C7612DA558B"}]),w=(0,n.iH)(h.value[0]);function b(e){t.map.setPaintProperty("sites","circle-radius",parseInt(e))}function y(e){t.map.getPaintProperty("sites","circle-color")!=e&&(t.map.setPaintProperty("sites","circle-color",e),u.circleColor=e)}function _(e){if(e>=12)return void O.log("Number of classes out of range");let t=[];A.Z.schemeGroups.diverging.forEach((a=>{const l={name:a,colors:A.Z[a][e]};t.push(l)})),v.value=t}function S(e){p.value=a.dataSchema.properties[e.key].type}function k(e){let t=[];return a.dataSchema.properties[e].oneOf.forEach((e=>{e.enum.forEach((e=>{e&&t.push(e)}))})),t}function U(e,t,a){const l=x(e,t).filter(Boolean);let o=new(j())(l),n=o.getJenks(a);return n}function x(e,t){let a=[];return e.features.forEach((e=>{a.push(e.properties[t])})),a}function M(e,t,a){const l=x(e,t).filter(Boolean),o=(0,B.pAO)(l,a-1);return o.unshift(Math.min.apply(null,l)),o.push(Math.max.apply(null,l)),o}function V(e){return"jenks"==w.value.name?U(t.map.getSource("sites")._data,e,m.value):M(t.map.getSource("sites")._data,e,m.value)}function C(e,t,a){let l=[];return l.push("match"),l.push(["get",e]),t.forEach(((e,t)=>{l.push(e,a[t])})),l.push("#ccc"),l}function F(e,t,a){let l=[],o=1;l.push("step"),l.push(["get",e]);for(var n=0;n<a.length;n++)l.push(a[n]),n<a.length-1&&(l.push(t[o]),o++);return l}function L(){if(c.value){if("number"==p.value){let e=V(c.value.key);const a=F(c.value.key,e,A.Z[f.value.name][m.value]);t.map.setPaintProperty("sites","circle-color",a),i.setLegendObject(e,A.Z[f.value.name][m.value])}else if(void 0==p.value){let e=k(c.value.key);m.value=e.length;const a=C(c.value.key,e,A.Z[f.value.name][m.value]);t.map.setPaintProperty("sites","circle-color",a),i.setLegendObject(e,A.Z[f.value.name][m.value])}else if("boolean"==p.value)return void O.log(c.value.key+" is boolean")}else O.error("no property selected")}return(0,o.YP)(m,(e=>{_(e)})),(e,t)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[E,(0,o._)("div",T,[(0,o._)("div",z,[(0,o.wy)((0,o._)("input",{type:"range",class:"form-range",id:"customRange1",min:"0",step:"1",max:"10","onUpdate:modelValue":t[0]||(t[0]=e=>(0,n.SU)(u).circleRadius=e),onInput:t[1]||(t[1]=e=>b((0,n.SU)(u).circleRadius))},null,544),[[l.nr,(0,n.SU)(u).circleRadius]]),(0,o._)("span",N,(0,r.zw)((0,n.SU)(u).circleRadius)+" px",1)])]),Z,(0,o._)("div",q,[(0,o._)("div",I,[(0,o._)("div",Y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,n.SU)(A.Z)["Paired"][12],(e=>((0,o.wg)(),(0,o.iD)("button",{type:"button",class:"btn btn-secondary",key:e,style:(0,r.j5)({"background-color":e}),onClick:t=>(y(e),(0,n.SU)(i).setLegendToNull())},null,12,R)))),128))])])]),K,(0,o._)("div",G,[(0,o._)("div",Q,[(0,o.Wm)((0,n.SU)(P.ZP),{modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=e=>c.value=e),options:(0,n.SU)(a).selectableProperties,label:"title",placeholder:"Property","allow-empty":!1,onSelect:t[3]||(t[3]=e=>(S(c.value),L()))},null,8,["modelValue","options"]),"number"==p.value?((0,o.wg)(),(0,o.j4)((0,n.SU)(P.ZP),{key:0,modelValue:w.value,"onUpdate:modelValue":t[4]||(t[4]=e=>w.value=e),options:h.value,label:"title",placeholder:"Data classification method","allow-empty":!1,onSelect:t[5]||(t[5]=e=>L())},{option:(0,o.w5)((({option:e})=>[(0,o.Uk)((0,r.zw)(e.title)+" ",1),(0,o.Wm)((0,n.SU)(s.Kp),{placement:"right",trigger:"hover"},{content:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.desc),1)])),toggler:(0,o.w5)((({on:e})=>[(0,o.Wm)((0,n.SU)(s.u5),(0,o.dG)({color:"transparent"},(0,o.mx)(e)),{default:(0,o.w5)((()=>[X])),_:2},1040)])),_:2},1024)])),_:1},8,["modelValue","options"])):(0,o.kq)("",!0),"number"==p.value?((0,o.wg)(),(0,o.j4)((0,n.SU)(P.ZP),{key:1,modelValue:m.value,"onUpdate:modelValue":t[6]||(t[6]=e=>m.value=e),options:d.value,placeholder:"Number of classes","allow-empty":!1,onSelect:t[7]||(t[7]=e=>L())},null,8,["modelValue","options"])):(0,o.kq)("",!0),c.value?((0,o.wg)(),(0,o.j4)((0,n.SU)(P.ZP),{key:2,modelValue:f.value,"onUpdate:modelValue":t[8]||(t[8]=e=>f.value=e),options:v.value,multiple:!1,"close-on-select":!0,"allow-empty":!1,onSelect:t[9]||(t[9]=e=>L())},{singleLabel:(0,o.w5)((({option:e})=>[(0,o._)("div",J,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.colors,(e=>((0,o.wg)(),(0,o.iD)("button",{type:"button",class:"btn btn-secondary",key:e,style:(0,r.j5)({backgroundColor:e})},null,4)))),128))])])),option:(0,o.w5)((({option:e})=>[(0,o._)("div",$,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.colors,(e=>((0,o.wg)(),(0,o.iD)("button",{type:"button",class:"btn btn-secondary",key:e,style:(0,r.j5)({backgroundColor:e})},null,4)))),128))])])),_:1},8,["modelValue","options"])):(0,o.kq)("",!0)])])],64))}};const te=ee;var ae=te,le=a(5941),oe={__name:"SettingsPanel",props:{map:i.Map,activeBaseLayer:String,heatFlowSchema:Object},setup(e){const t=e,a=(0,n.iH)(t.heatFlowSchema);return(0,o.YP)(t,(e=>{a.value=e.heatFlowSchema,le.log("--------Settings"),le.log(a.value)})),(e,a)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(M,{map:t.map,activeBaseLayer:t.activeBaseLayer},null,8,["map","activeBaseLayer"]),(0,o.Wm)(ae,{map:t.map},null,8,["map"])],64))}};const ne=oe;var re=ne,ie=a(5941);const se=(0,v.Q_)("filter",(()=>{const e=(0,n.iH)({attributeFilter:{},locationFilter:{}}),t=(0,n.iH)(10),a=(0,n.iH)(!1);function l(){return{selectedProperty:null,selectedPropertyType:null,selectedValues:null,expression:null}}function o(o,n){if("locationFilter"==n)return void(e.value[n][o]=l());const r=Object.keys(e.value[n]).length;"attributeFilter"==n&&r<t.value?e.value[n][o]=l():(a.value=!0,ie.log("You reached the maximum number of attribute filters"))}function r(t,l){delete e.value[l][t],a.value=!1}function i(){let t=["all"];return Object.entries(e.value).forEach((([a])=>{Object.entries(e.value[a]).forEach((([l])=>{null!=e.value[a][l].expression?t.push(e.value[a][l].expression):ie.log("Empty filterExpression for filter with key: "+l)}))})),ie.log(t),t}function s(e){const t=i();e.setFilter("sites",t)}function u(e,t){const a=new Set,l=[];for(const o of e){const e=o.properties[t];a.has(e)||(a.add(e),l.push(o))}return l}function c(e){let t=i(),a=e.querySourceFeatures("sites",{sourceLayer:"sites",filter:t});const l=u(a,"id");return ie.log(l),l}return{filters:e,maxAttributeFilter:t,reachedLimit:a,getNewFilterObject:l,addFilter:o,removeFilterElement:r,applyFilterToMap:s,getFilteredFeatures:c}}));var ue=a(8303),ce=a.n(ue),pe=a(5941);const de=e=>((0,o.dD)("data-v-7f8bd96c"),e=e(),(0,o.Cn)(),e),me={class:"filter-element"},ve=de((()=>(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6Z"}),(0,o._)("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1ZM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118ZM2.5 3h11V2h-11v1Z"})],-1))),ge=[ve],fe={key:0,class:"filter-values"},he={class:"filter-controller"},we={key:0},be={key:1,class:"slider"},ye={key:0,class:"reset-filter-btn"},_e=de((()=>(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-bootstrap-reboot",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M1.161 8a6.84 6.84 0 1 0 6.842-6.84.58.58 0 1 1 0-1.16 8 8 0 1 1-6.556 3.412l-.663-.577a.58.58 0 0 1 .227-.997l2.52-.69a.58.58 0 0 1 .728.633l-.332 2.592a.58.58 0 0 1-.956.364l-.643-.56A6.812 6.812 0 0 0 1.16 8z"}),(0,o._)("path",{d:"M6.641 11.671V8.843h1.57l1.498 2.828h1.314L9.377 8.665c.897-.3 1.427-1.106 1.427-2.1 0-1.37-.943-2.246-2.456-2.246H5.5v7.352h1.141zm0-3.75V5.277h1.57c.881 0 1.416.499 1.416 1.32 0 .84-.504 1.324-1.386 1.324h-1.6z"})],-1))),Se=[_e];var ke={__name:"FilterElement",props:{id:String},setup(e){const t=e,a=W(),l=se(),r=(0,n.iH)(l.filters.attributeFilter[t.id]),i=(0,n.iH)(null);function u(e){r.value.selectedPropertyType=a.dataSchema.properties[e].type}function c(){"number"==r.value.selectedPropertyType&&0!=i.value.length?r.value.selectedValues=[i.value[0],i.value[1]]:r.value.selectedValues=[]}function p(){r.value.expression=null}function d(e){let t=[];return a.dataSchema.properties[e].oneOf.forEach((e=>{e.enum.forEach((e=>{e&&t.push(e)}))})),t}function m(e,t){let a=[];return e.features.forEach((e=>{a.push(e.properties[t])})),a}function v(e,t){const a=m(e,t).filter(Boolean),l=Math.floor(Math.min.apply(null,a)),o=Math.ceil(Math.max.apply(null,a)),n=[l,o];return n}function g(e){if(void 0==r.value.selectedPropertyType)i.value=d(e);else if("number"==r.value.selectedPropertyType){const t=a.geojson;i.value=v(t,e),r.value.selectedValues=[i.value[0],i.value[1]]}else pe.log("Data type of property is not defined")}function f(e,t){let a=["any"];return t.forEach((t=>{a.push(["in",["get",e],t])})),a}function h(e,t){const a=t[0],l=t[1];let o=["all",[">=",["get",e],a],["<=",["get",e],l]];return o}function w(e,t){if(void 0==r.value.selectedPropertyType)r.value.expression=f(e,t);else if("number"==r.value.selectedPropertyType)r.value.expression=h(e,t);else if(!r.value.selectedPropertyType)return pe.error("no property selected"),void pe.log(r.value.selectedPropertyType)}return(0,o.YP)(r.value.selectedValues,(()=>{r.value.selectedValues.length>0&&w(r.value.selectedProperty,r.value.selectedValues)})),(e,d)=>((0,o.wg)(),(0,o.iD)("div",me,[(0,o.Wm)((0,n.SU)(s.rb),{class:"d-felx justify-content-start"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.b7),{xs:"10"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(P.ZP),{modelValue:r.value.selectedProperty,"onUpdate:modelValue":d[0]||(d[0]=e=>r.value.selectedProperty=e),options:(0,n.SU)(a).selectableProperties,label:"title","allow-empty":!1,placeholder:"Select property",onSelect:d[1]||(d[1]=e=>{u(r.value.selectedProperty.key),g(r.value.selectedProperty.key),c()})},null,8,["modelValue","options"])])),_:1}),(0,o.Wm)((0,n.SU)(s.b7),{xs:"1"},{default:(0,o.w5)((()=>[(0,o._)("button",{class:"btn btn-primary",onClick:d[2]||(d[2]=e=>(0,n.SU)(l).removeFilterElement(t.id,"attributeFilter"))},ge)])),_:1})])),_:1}),r.value.selectedProperty?((0,o.wg)(),(0,o.iD)("div",fe,[(0,o._)("div",he,[void 0===r.value.selectedPropertyType?((0,o.wg)(),(0,o.iD)("div",we,[(0,o.Wm)((0,n.SU)(P.ZP),{modelValue:r.value.selectedValues,"onUpdate:modelValue":d[3]||(d[3]=e=>r.value.selectedValues=e),options:i.value,multiple:!0,placeholder:"Select value(s)",onSelect:d[4]||(d[4]=e=>w(r.value.selectedProperty.key,r.value.selectedValues)),onRemove:d[5]||(d[5]=e=>w(r.value.selectedProperty.key,r.value.selectedValues))},null,8,["modelValue","options"])])):(0,o.kq)("",!0),"number"===r.value.selectedPropertyType?((0,o.wg)(),(0,o.iD)("div",be,[(0,o.Wm)((0,n.SU)(ce()),{modelValue:r.value.selectedValues,"onUpdate:modelValue":d[6]||(d[6]=e=>r.value.selectedValues=e),min:i.value[0],max:i.value[1],interval:.01,onChange:d[7]||(d[7]=e=>w(r.value.selectedProperty.key,r.value.selectedValues))},null,8,["modelValue","min","max"])])):(0,o.kq)("",!0)]),r.value.selectedValues.length>0?((0,o.wg)(),(0,o.iD)("div",ye,[(0,o._)("button",{class:"btn btn-primary",onClick:d[8]||(d[8]=e=>{c(),p()})},Se)])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)]))}};const Ue=(0,p.Z)(ke,[["__scopeId","data-v-7f8bd96c"]]);var xe=Ue,Me=a(5884),Ve=a.n(Me);const Ce=(0,v.Q_)("mapControls",(()=>{const e=(0,n.iH)(new(Ve())({displayControlsDefault:!1,controls:{}})),t=(0,n.iH)(new i.ScaleControl),a=(0,n.iH)(new i.FullscreenControl),l=(0,n.iH)(new i.NavigationControl);return{mapboxDraw:e,scale:t,fullscreen:a,navigation:l}}));var Fe=a(5941);const Le={class:"collapse",id:"locationFilter"},We=(0,o._)("p",null,"Filter points within a custom drawn polygon",-1),He=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-bounding-box-circles",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M2 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2M0 2a2 2 0 0 1 3.937-.5h8.126A2 2 0 1 1 14.5 3.937v8.126a2 2 0 1 1-2.437 2.437H3.937A2 2 0 1 1 1.5 12.063V3.937A2 2 0 0 1 0 2m2.5 1.937v8.126c.703.18 1.256.734 1.437 1.437h8.126a2 2 0 0 1 1.437-1.437V3.937A2 2 0 0 1 12.063 2.5H3.937A2 2 0 0 1 2.5 3.937M14 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2M2 13a1 1 0 1 0 0 2 1 1 0 0 0 0-2m12 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2"})],-1),Pe=[He],De=(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),(0,o._)("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"})],-1),je=[De];var Be={__name:"FilterByLocation",props:{map:Map},setup(e){const t=e;Fe.log("inside filter by location"),Fe.log(t.map);const a=se(),l=Ce();function r(){l.mapboxDraw.changeMode("draw_polygon")}function i(){l.mapboxDraw.trash()}function u(e){let t=[];return t.push("within"),t.push(e),t}return t.map.on("draw.create",(function(e){a.addFilter(e.features[0].id,"locationFilter"),a.filters.locationFilter[e.features[0].id].expression=u(e.features[0].geometry),Fe.log("geojson output"),Fe.log(e.features),Fe.log(l)})),t.map.on("draw.delete",(function(e){a.removeFilterElement(e.features[0].id,"locationFilter")})),t.map.on("draw.update",(function(e){a.filters.locationFilter[e.features[0].id].expression[1]=e.features[0].geometry})),(e,t)=>((0,o.wg)(),(0,o.iD)("div",Le,[We,(0,o.Wm)((0,n.SU)(s.If),{content:"Draw polygon",placement:"bottom"},{toggler:(0,o.w5)((({on:e})=>[(0,o._)("button",(0,o.dG)({id:"draw-polygon-btn",class:"btn btn-primary mx-1"},(0,o.mx)(e,!0),{onClick:t[0]||(t[0]=e=>r())}),Pe,16)])),_:1}),(0,o.Wm)((0,n.SU)(s.If),{content:"Delete selected polygon",placement:"bottom"},{toggler:(0,o.w5)((({on:e})=>[(0,o._)("button",(0,o.dG)({id:"delte-polygon-btn",class:"btn btn-primary mx-1"},(0,o.mx)(e,!0),{onClick:t[1]||(t[1]=e=>i())}),je,16)])),_:1})]))}};const Ae=Be;var Oe=Ae;const Ee=(0,o._)("button",{class:"btn btn-primary rounded-circle",type:"button"},[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-download",viewBox:"0 0 16 16"},[(0,o._)("path",{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"}),(0,o._)("path",{d:"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"})])],-1);var Te={__name:"DownloadData",props:{map:i.Map},setup(e){const t=e,a=se();function l(e,t){const a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),l=URL.createObjectURL(a),o=document.createElement("a");o.href=l,o.download=`${t}.geojson`,o.click(),URL.revokeObjectURL(l)}return(e,r)=>((0,o.wg)(),(0,o.iD)("button",{class:"btn btn-primary rounded-pill bg-white text-primary position-absolute bottom-0 start-0 mx-2 my-2",onClick:r[0]||(r[0]=e=>((0,n.SU)(a).getFilteredFeatures(t.map),l((0,n.SU)(a).getFilteredFeatures(t.map),"test")))},[Ee,(0,o.Uk)(" Download ")]))}};const ze=Te;var Ne=ze,Ze=a(5941);const qe=(0,o._)("p",{class:"mt-1 d-grid gap-2"},[(0,o._)("button",{class:"btn btn-primary",type:"button","data-bs-toggle":"collapse","data-bs-target":"#attributeFilter","aria-expanded":"false","aria-controls":"attributeFilter"},[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrows-expand",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2M8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10"})]),(0,o.Uk)(" Attribute Filter ")])],-1),Ie={class:"collapse",id:"attributeFilter"},Ye={class:"filter-managing-tools"},Re={key:0,for:"add-filter-btn"},Ke=(0,o._)("p",{class:"mt-1 d-grid gap-2"},[(0,o._)("button",{class:"btn btn-primary",type:"button","data-bs-toggle":"collapse","data-bs-target":"#locationFilter","aria-expanded":"false","aria-controls":"locationFilter"},[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrows-expand",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2M8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10"})]),(0,o.Uk)(" Location Filter ")])],-1);var Ge={__name:"FilterPanal",props:{map:i.Map},setup(e){const t=e,a=se();function l(){if(Object.keys(a.filters["attributeFilter"]).length<=a.maxAttributeFilter){const e="attrFilter"+Date.now();a.addFilter(e,"attributeFilter")}else a.reachedLimit=!0,Ze.log("You reached the maximum number of filters")}return(0,o.YP)(a.filters,(()=>{a.applyFilterToMap(t.map)})),(t,r)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[qe,(0,o._)("div",Ie,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.keys((0,n.SU)(a).filters.attributeFilter),(e=>((0,o.wg)(),(0,o.j4)(xe,{key:e,id:e},null,8,["id"])))),128)),(0,o._)("div",Ye,[(0,n.SU)(a).reachedLimit?((0,o.wg)(),(0,o.iD)("label",Re,"You reached the max number of filters")):(0,o.kq)("",!0),(0,n.SU)(a).reachedLimit?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("button",{key:1,id:"add-filter-btn",class:"btn btn-primary",onClick:r[0]||(r[0]=e=>l())}," + Add Filter "))])]),Ke,(0,o.Wm)(Oe,{map:e.map},null,8,["map"]),(0,o.Wm)(Ne,{map:e.map},null,8,["map"])],64))}};const Qe=Ge;var Xe=Qe,Je=a(6294),$e=a(7690),et=a.n($e),tt=a(5941);const at=(0,o._)("p",{class:"mt-1 d-grid gap-2"},[(0,o._)("button",{class:"btn btn-primary",type:"button","data-bs-toggle":"collapse","data-bs-target":"#datasetSelection","aria-expanded":"false","aria-controls":"datasetSelection"},[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrows-expand",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2M8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10"})]),(0,o.Uk)(" 1. select dataset ")])],-1),lt={class:"collapse",id:"datasetSelection"},ot=(0,o._)("p",{class:"mt-1 d-grid gap-2"},[(0,o._)("button",{class:"btn btn-primary",type:"button","data-bs-toggle":"collapse","data-bs-target":"#propertySelection","aria-expanded":"false","aria-controls":"propertySelection"},[(0,o._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrows-expand",viewBox:"0 0 16 16"},[(0,o._)("path",{"fill-rule":"evenodd",d:"M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2M8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10"})]),(0,o.Uk)(" 2. select property ")])],-1),nt={class:"collapse",id:"propertySelection"},rt=(0,o._)("div",{class:"w-100 h-100 d-inline-block",id:"statisticGraph"},null,-1);var it={__name:"StatisticsPanal",props:{map:Map},setup(e){const t=e,a=W(),l=se(),i=(0,n.iH)(["GHFDB","Filtered GHFDB"]),u=(0,n.iH)(null),c=(0,n.iH)(a.geojson),p=(0,n.iH)(null),d=(0,n.iH)(null),m=(0,n.iH)({min:null,max:null,mean:null,std:null,median:null,skewness:null,kurtosis:null});function v(){if("GHFDB"==u.value)c.value=a.geojson;else if("Filtered GHFDB"==u.value){const e={type:"FeatureCollection",features:l.getFilteredFeatures(t.map)};c.value=e}}function g(e){let t=f(e);tt.log("plotGraph"),tt.log(t);const a={x:t,type:"histogram"},l=[a];(0,Je.newPlot)("statisticGraph",l)}function f(e){tt.log("----before----"),tt.log(c.value.features);let t=c.value.features.map((t=>t.properties[e]));return tt.log("----after----"),tt.log(t),t}function h(e){d.value=a.dataSchema.properties[e.key].type}function w(e){m.value.min=Math.min.apply(null,e).toFixed(5)}function b(e){m.value.max=Math.max.apply(null,e).toFixed(5)}function y(e){m.value.mean=(0,B.J69)(e).toFixed(5)}function _(e){m.value.std=(0,B.qoR)(e).toFixed(5)}function S(e){m.value.median=(0,B.C2o)(e).toFixed(5)}function k(e){const t=new(et())([]);m.value.skewness=t.skewness(e).toFixed(5),tt.log("----skewness"),tt.log(m.value.skewness)}function U(e){const t=new(et())([]);m.value.kurtosis=t.kurtosis(e).toFixed(5),tt.log("----kurtosis"),tt.log(m.value.kurtosis)}function x(e){const t=f(e);w(t),b(t),y(t),_(t),S(t),k(t),U(t)}function M(e){tt.log("--------statistics panel---------"),tt.log(e)}return(0,o.YP)(d,(e=>{"number"==e&&x(p.value.key)})),(e,t)=>((0,o.wg)(),(0,o.iD)("div",null,[at,(0,o._)("div",lt,[(0,o.Wm)((0,n.SU)(P.ZP),{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),options:i.value,"allow-empty":!1,placeholder:"1. select dataset",onSelect:t[1]||(t[1]=e=>(M(u.value),v()))},null,8,["modelValue","options"])]),ot,(0,o._)("div",nt,[(0,o.Wm)((0,n.SU)(P.ZP),{modelValue:p.value,"onUpdate:modelValue":t[2]||(t[2]=e=>p.value=e),options:(0,n.SU)(a).selectableProperties,label:"title","allow-empty":!1,placeholder:"2. select property",onSelect:t[3]||(t[3]=e=>{M(p.value),h(p.value),g(p.value.key)})},null,8,["modelValue","options"])]),rt,"number"==d.value?((0,o.wg)(),(0,o.j4)((0,n.SU)(s.Sx),{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.V),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.T6),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.is),{scope:"col"},{default:(0,o.w5)((()=>[(0,o.Uk)("Measure")])),_:1}),(0,o.Wm)((0,n.SU)(s.is),{scope:"col"},{default:(0,o.w5)((()=>[(0,o.Uk)("Values")])),_:1})])),_:1})])),_:1}),(0,o.Wm)((0,n.SU)(s.NR),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.T6),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.is),{scope:"row"},{default:(0,o.w5)((()=>[(0,o.Uk)("Min")])),_:1}),(0,o.Wm)((0,n.SU)(s.NN),null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(m.value.min),1)])),_:1})])),_:1}),(0,o.Wm)((0,n.SU)(s.T6),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.is),{scope:"row"},{default:(0,o.w5)((()=>[(0,o.Uk)("Max")])),_:1}),(0,o.Wm)((0,n.SU)(s.NN),null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(m.value.max),1)])),_:1})])),_:1}),(0,o.Wm)((0,n.SU)(s.T6),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.is),{scope:"row"},{default:(0,o.w5)((()=>[(0,o.Uk)("Mean")])),_:1}),(0,o.Wm)((0,n.SU)(s.NN),null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(m.value.mean),1)])),_:1})])),_:1}),(0,o.Wm)((0,n.SU)(s.T6),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.is),{scope:"row"},{default:(0,o.w5)((()=>[(0,o.Uk)("Median")])),_:1}),(0,o.Wm)((0,n.SU)(s.NN),null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(m.value.median),1)])),_:1})])),_:1}),(0,o.Wm)((0,n.SU)(s.T6),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.is),{scope:"row"},{default:(0,o.w5)((()=>[(0,o.Uk)("Std")])),_:1}),(0,o.Wm)((0,n.SU)(s.NN),null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(m.value.std),1)])),_:1})])),_:1}),(0,o.Wm)((0,n.SU)(s.T6),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.is),{scope:"row"},{default:(0,o.w5)((()=>[(0,o.Uk)("Skewness")])),_:1}),(0,o.Wm)((0,n.SU)(s.NN),null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(m.value.skewness),1)])),_:1})])),_:1}),(0,o.Wm)((0,n.SU)(s.T6),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.is),{scope:"row"},{default:(0,o.w5)((()=>[(0,o.Uk)("Kurtosis")])),_:1}),(0,o.Wm)((0,n.SU)(s.NN),null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(m.value.kurtosis),1)])),_:1})])),_:1}),(0,o.Wm)((0,n.SU)(s.T6),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.is),{scope:"row"},{default:(0,o.w5)((()=>[(0,o.Uk)("Count")])),_:1}),(0,o.Wm)((0,n.SU)(s.NN),null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(c.value.features.length),1)])),_:1})])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0)]))}};const st=it;var ut=st,ct=a.p+"static/map/dist/img/digital_borehole_example.c3dd2b3b.png",pt=a.p+"static/map/dist/img/2D_profile.1eeacbcd.png";const dt=(0,o.uE)('<p>This panel is gooing to be developed.</p><p class="mt-1 d-grid gap-2"><button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#digitalBorehole" aria-expanded="false" aria-controls="digitalBorehole"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrows-expand" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2M8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10"></path></svg> Digital Borehole </button></p><div class="collapse" id="digitalBorehole"><p> This feature should allow you to draw a point on the map and get a graph with the temperature depending on the depth. The values are derived from neighborhood relationships to existing data points. </p><img src="'+ct+'" alt="Digital Borehole"></div><p class="mt-1 d-grid gap-2"><button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#profile" aria-expanded="false" aria-controls="profile"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrows-expand" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8M7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2M8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10"></path></svg> 2D Profile </button></p><div class="collapse" id="profile"><p> This feature allows you to draw a line on the map and visualize the course of a selected attribute along the line. The values along the line are derived from neighborhood relationships to existing data points. </p><img src="'+pt+'" alt="2D Profile" width="100%"></div>',5),mt=[dt];function vt(e,t){return(0,o.wg)(),(0,o.iD)("div",null,mt)}const gt={},ft=(0,p.Z)(gt,[["render",vt]]);var ht=ft,wt={__name:"LeftPanel",props:{title:String,map:i.Map},emits:["collapse-event","toggle-event"],setup(e,{emit:t}){const a=e,l=t;return(e,t)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)((0,n.SU)(s.Cu),{class:"bg-primary"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.XU),{class:"text-white"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(a.title),1)])),_:1}),(0,o.Wm)((0,n.SU)(s.pd),{class:"text-reset text-primary",onClick:t[0]||(t[0]=e=>(l("collapse-event"),l("toggle-event")))})])),_:1}),(0,o.Wm)((0,n.SU)(s.xF),null,{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)(o.Ob,null,["Settings"===a.title?((0,o.wg)(),(0,o.j4)(re,{key:0,map:a.map},null,8,["map"])):(0,o.kq)("",!0)],1024)),((0,o.wg)(),(0,o.j4)(o.Ob,null,["Filter"===a.title?((0,o.wg)(),(0,o.j4)(Xe,{key:0,map:a.map},null,8,["map"])):(0,o.kq)("",!0)],1024)),((0,o.wg)(),(0,o.j4)(o.Ob,null,["Statistics"===a.title?((0,o.wg)(),(0,o.j4)(ut,{key:0,map:a.map},null,8,["map"])):(0,o.kq)("",!0)],1024)),((0,o.wg)(),(0,o.j4)(o.Ob,null,["Analysis"===a.title?((0,o.wg)(),(0,o.j4)(ht,{key:0})):(0,o.kq)("",!0)],1024))])),_:1})],64))}};const bt=wt;var yt=bt;const _t={class:"infoPopup",id:"infoPopup"};var St={__name:"InfoPopup",props:{map:{type:i.Map,required:!0}},setup(e){const t=e,a=(0,n.iH)(t.map),l=(0,n.iH)(null),u=(0,n.iH)(!1),c=(0,n.iH)({id:null,q:null,q_uncertainty:null,lithology:null,lng:null,lat:null});function p(e){c.value.id=e.id,c.value.lng=e.geometry.coordinates[0].toFixed(5),c.value.lat=e.geometry.coordinates[1].toFixed(5),Object.keys(c.value).forEach((t=>{e.properties[t]&&(c.value[t]=e.properties[t])}))}function d(){u.value=!u.value}return(0,o.bv)((()=>{l.value=document.getElementById("infoPopup")})),(0,o.YP)(t,(e=>{a.value=e.map,a.value.on("click","sites",(e=>{const t=e.features[0].geometry.coordinates.slice();p(e.features[0]);while(Math.abs(e.lngLat.lng-t[0])>180)t[0]+=e.lngLat.lng>t[0]?360:-360;const o=(new i.Popup).setLngLat(t).setDOMContent(l.value);o.addTo(a.value),d(),o.on("close",(()=>{d()}))})),a.value.on("mouseenter","sites",(()=>{a.value.getCanvas().style.cursor="pointer"})),a.value.on("mouseleave","sites",(()=>{a.value.getCanvas().style.cursor=""}))})),(e,t)=>((0,o.wg)(),(0,o.j4)(o.Ob,null,[(0,o._)("div",_t,[(0,o._)("h2",null,(0,r.zw)(c.value.id),1),u.value?((0,o.wg)(),(0,o.j4)((0,n.SU)(s.Sx),{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.V),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.T6),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.is),{scope:"col"},{default:(0,o.w5)((()=>[(0,o.Uk)("Property")])),_:1}),(0,o.Wm)((0,n.SU)(s.is),{scope:"col"},{default:(0,o.w5)((()=>[(0,o.Uk)("Value")])),_:1})])),_:1})])),_:1}),(0,o.Wm)((0,n.SU)(s.NR),null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.keys(c.value),(e=>((0,o.wg)(),(0,o.j4)((0,n.SU)(s.T6),{key:e},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.is),{scope:"row"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e),1)])),_:2},1024),(0,o.Wm)((0,n.SU)(s.NN),null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(c.value[e]),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):(0,o.kq)("",!0)])],1024))}};const kt=St;var Ut=kt;const xt={key:0,class:"legend-container"};var Mt={__name:"MapLegend",setup(e){const t=H(),a=(0,n.iH)(!1);return(e,l)=>(0,n.SU)(t).legend?((0,o.wg)(),(0,o.iD)("div",xt,[(0,o.Wm)((0,n.SU)(s.KB),null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.u5),{class:"position-absolute top-0 end-0 translate-middle btn btn-sm btn-primary",color:"primary",onClick:l[0]||(l[0]=e=>a.value=!a.value)},{default:(0,o.w5)((()=>[(0,o.Uk)("Legend")])),_:1}),(0,o.Wm)((0,n.SU)(s.V9),{visible:a.value},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.xH),{class:"mt-3"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.sl),null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,n.SU)(t).legend,(e=>((0,o.wg)(),(0,o.j4)((0,n.SU)(s.rb),{class:"align-items-start",key:e.id},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.b7),{class:"align-self-start",xs:"2"},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.u5),{style:(0,r.j5)({"background-color":e.colorHEX}),onClick:l[1]||(l[1]=e=>a.value=!a.value)},null,8,["style"])])),_:2},1024),(0,o.Wm)((0,n.SU)(s.b7),{class:"d-flex align-self-end",xs:"10"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.text),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["visible"])])),_:1})])):(0,o.kq)("",!0)}};const Vt=(0,p.Z)(Mt,[["__scopeId","data-v-1575c570"]]);var Ct=Vt,Ft=a(5941);const Lt={class:"map-wrap"},Wt={class:"fixed-bottom"},Ht={class:"cursor-div"};var Pt={__name:"MapApp",setup(e){const t=document.querySelector("#whfd-mapping"),a=(0,n.iH)({dataURL:t.dataset.dataUrl,schemaURL:t.dataset.schemaUrl});Ft.log("inside mapApp dataset pass data from html to js"),Ft.log(a);const l=W();l.fetchAPIDataSchema(a.value.schemaURL);const u=Ce(),c=g(),p=f(),d=(0,n.iH)(),v=(0,n.iH)(),h=(0,n.iH)(["Settings","Filter","Statistics","Analysis"]),w=(0,n.iH)(""),b=(0,n.iH)(!0),y=(0,n.iH)(!1),_=()=>b.value=!b.value;function S(e){w.value=e.srcElement.innerHTML}function k(){let e={};return p.baseMaps.forEach((t=>{e[t.id]={type:"raster",tiles:[t.tiles],tileSize:256,attribution:t.attribution,minzoom:0,maxzoom:22}})),e}function U(){let e=[];return p.baseMaps.forEach(((t,a)=>{let l={id:t.id,type:"raster",source:t.id};0==a?(c.activeBaseLayer=t.id,l.layout={visibility:"visible"}):l.layout={visibility:"none"},e.push(l)})),e}function x(){y.value=!y.value}return(0,o.bv)((()=>{v.value=(0,n.Xl)(new i.Map({mapId:"map_1",container:d.value,attributionControl:!0,style:{version:8,sources:k(),layers:U(),glyphs:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf"}})),v.value.once("load",(async()=>{v.value.addControl(u.scale,"bottom-right"),v.value.addControl(u.fullscreen,"top-right"),v.value.addControl(u.navigation,"top-right"),v.value.addControl(u.mapboxDraw);try{await l.fetchAPIData(a.value.dataURL)}catch(e){Ft.log(e)}v.value.addSource("sites",{type:"geojson",data:l.geojson}),v.value.addLayer({id:"sites",type:"circle",source:"sites",paint:{"circle-color":c.circleColor,"circle-radius":c.circleRadius,"circle-stroke-width":.5,"circle-stroke-color":"#a1dab4"},layout:{visibility:"visible"}})}))})),(0,o.Ah)((()=>{v.value?.remove()})),(e,t)=>((0,o.wg)(),(0,o.iD)("div",Lt,[(0,o.Wm)((0,n.SU)(s.rb),{class:"align-items-center"},{default:(0,o.w5)((()=>[(0,n.SU)(l).isDataLoading?((0,o.wg)(),(0,o.j4)((0,n.SU)(s.u5),{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)((0,n.SU)(s.LQ),{component:"span",size:"sm","aria-hidden":"true"}),(0,o.Uk)(" Loading Data... ")])),_:1})):(0,o.kq)("",!0)])),_:1}),(0,o._)("div",{class:"map",ref_key:"mapContainer",ref:d,onMousemove:t[4]||(t[4]=(...t)=>e.updateLatLng&&e.updateLatLng(...t))},[(0,o.Wm)(Ut,{map:v.value},null,8,["map"]),(0,o.Wm)(Ct),(0,o._)("div",Wt,[(0,o.Wm)((0,n.SU)(s.Z0),{role:"group","aria-label":"Basic example"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(h.value,(e=>((0,o.wg)(),(0,o.j4)((0,n.SU)(s.u5),{color:"primary",key:e,onClick:t[0]||(t[0]=e=>(b.value&&S(e),_(),x())),type:"button",class:"btn btn-primary"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e),1)])),_:2},1024)))),128))])),_:1}),(0,o.Wm)((0,n.SU)(s.N3),{backdrop:!1,placement:"start",scroll:"",visible:y.value,onHide:t[3]||(t[3]=()=>{y.value=!y.value})},{default:(0,o.w5)((()=>[(0,o.Wm)(yt,{title:w.value,map:v.value,onCollapseEvent:t[1]||(t[1]=e=>_()),onToggleEvent:t[2]||(t[2]=e=>x())},null,8,["title","map"])])),_:1},8,["visible"]),(0,o._)("div",Ht,[(0,o.Wm)(m,{map:v.value},null,8,["map"])])])],544)]))}};const Dt=(0,p.Z)(Pt,[["__scopeId","data-v-168a7650"]]);var jt=Dt,Bt={__name:"App",setup(e){return(e,t)=>((0,o.wg)(),(0,o.j4)(jt))}};const At=Bt;var Ot=At;a(5654);const Et=(0,l.ri)(Ot).use((0,v.WB)());Et.mount(document.getElementsByClassName("whfd-mapping")[0])},3471:function(){},4654:function(){},2361:function(){},4616:function(){},5042:function(){}},t={};function a(l){var o=t[l];if(void 0!==o)return o.exports;var n=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=e,function(){a.amdD=function(){throw new Error("define cannot be used indirect")}}(),function(){a.amdO={}}(),function(){var e=[];a.O=function(t,l,o,n){if(!l){var r=1/0;for(c=0;c<e.length;c++){l=e[c][0],o=e[c][1],n=e[c][2];for(var i=!0,s=0;s<l.length;s++)(!1&n||r>=n)&&Object.keys(a.O).every((function(e){return a.O[e](l[s])}))?l.splice(s--,1):(i=!1,n<r&&(r=n));if(i){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[l,o,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var o,n,r=l[0],i=l[1],s=l[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(s)var c=s(a)}for(t&&t(l);u<r.length;u++)n=r[u],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},l=self["webpackChunkwhfd_mapping"]=self["webpackChunkwhfd_mapping"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(3737)}));l=a.O(l)})();
//# sourceMappingURL=app.4079f5ad.js.map