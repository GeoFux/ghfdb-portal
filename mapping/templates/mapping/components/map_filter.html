{% load static widget_tweaks sekizai_tags%}

<form id='filter-form' action="" method='POST'>
    {% csrf_token %}
    <div class="form-group row">
        <label for='dataType' class="col-sm-2 col-form-label text-nowrap">Data Type</label>
        <div class="col-sm-10 input-group">
            <select id='dataType' name='dataType' class="custom-select" form='filter-form'>
                <option selected value="heatflow">Heat Flow</option>
                <option value="temperature">Temperature</option>
                <option value="conductivity">Thermal Conductivity</option>
                <option value="heatgeneration">Heat Generation</option>
            </select>
        </div>
    </div>
    {% for filter in filters %}
        {% for field in filter %}
        {% if field|field_type == 'checkbox' %}
        <div class="form-check form-check-inline">
            {% render_field field class='form-check-input ' data-toggle="toggle" %}
            <label class="form-check-label" for="inlineCheckbox1">{{ field.label }}</label>
        </div>
        {% else %}
        <div class="form-group row">
            <label class="col-sm-2 col-form-label text-nowrap">{{ field.label|title }}</label>
            <div class="col-sm-10 input-group text-left">
            {% if field|field_type == 'modelchoicefield' %}
                {% render_field field class="form-control select2" %}
            {% elif field|field_type == 'geomodelchoicefield' %}
                {% render_field field class="form-control select2" %}
            {% else %}
                {% render_field field class="form-control" %}
            {% endif %}
            </div>
        {% endif %}                      
            </div>
        {% endfor %}
    
    {% endfor %}
    <div class="sidebar-submenu">
        <button id='filter-clear-button' type='reset' class='btn btn-secondary m-3'>Reset Filters</button>  
        <button id='filter-submit-button' type='button' onclick="retrieveData()" class='btn btn-primary m-3'>Apply</button>  
    </div>
    <div class='card-body'>
        <button type='submit' class="btn btn-success btn-block btn-lg">DOWNLOAD</button>
    </div>
</form>

{% addtoblock "css" %}{% endaddtoblock %}

{% addtoblock "js" %}
<script>
    $(document).ready(function() {
        $('.select2').select2();
        $('.select2').on('select2:select', function (e) {
        $('.select2').not(this).each(function(){
            $(this).val(null).trigger('change');
            });
        });

    });

    $(document).keypress(function(e){
        if (e.which == 13){
        $("#filter-submit-button").click();
        }
    });
</script>

{% endaddtoblock %}









